/* Set minimum width for nodes to prevent text wrapping */
.react-flow__node {
  min-width: 170px;
}

/* Animated dashed red border for disconnected nodes */
@keyframes marching-ants {
  0% {
    background-position:
      0 0,
      100% 0,
      0 100%,
      0 0;
  }
  100% {
    background-position:
      10px 0,
      100% 10px,
      -10px 100%,
      0 -10px;
  }
}

.disconnected-node {
  border: none !important;
}

.disconnected-node::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  background:
    repeating-linear-gradient(
        90deg,
        #ef4444 0,
        #ef4444 5px,
        transparent 5px,
        transparent 10px
      )
      0 0,
    repeating-linear-gradient(
        0deg,
        #ef4444 0,
        #ef4444 5px,
        transparent 5px,
        transparent 10px
      )
      100% 0,
    repeating-linear-gradient(
        90deg,
        #ef4444 0,
        #ef4444 5px,
        transparent 5px,
        transparent 10px
      )
      0 100%,
    repeating-linear-gradient(
        0deg,
        #ef4444 0,
        #ef4444 5px,
        transparent 5px,
        transparent 10px
      )
      0 0;
  background-size:
    100% 2px,
    2px 100%,
    100% 2px,
    2px 100%;
  background-repeat: no-repeat;
  animation: marching-ants 0.5s linear infinite;
  border-radius: inherit;
}

/* Animated flow for connected edges */
@keyframes flow {
  0% {
    stroke-dashoffset: 10;
  }
  100% {
    stroke-dashoffset: 0;
  }
}

/* Green subtle glow for healthy orchestrator nodes */
@keyframes green-glow {
  0%,
  100% {
    box-shadow:
      0 0 4px rgba(34, 197, 94, 0.2),
      0 0 10px rgba(34, 197, 94, 0.05);
    border-color: rgba(34, 197, 94, 0.3);
  }
  50% {
    box-shadow:
      0 0 14px rgba(34, 197, 94, 0.5),
      0 0 36px rgba(34, 197, 94, 0.2);
    border-color: rgba(34, 197, 94, 0.8);
  }
}

.monitoring-node {
  border: 2px solid rgba(34, 197, 94, 0.3) !important;
  animation: green-glow 2.5s ease-in-out infinite;
}

/* Amber pulse glow for orchestrator nodes recovering the cluster */
@keyframes amber-pulse {
  0%,
  100% {
    box-shadow:
      0 0 8px rgba(245, 158, 11, 0.4),
      0 0 20px rgba(245, 158, 11, 0.1);
    border-color: rgba(245, 158, 11, 0.6);
  }
  50% {
    box-shadow:
      0 0 16px rgba(245, 158, 11, 0.6),
      0 0 40px rgba(245, 158, 11, 0.2);
    border-color: rgba(245, 158, 11, 0.9);
  }
}

.recovering-node {
  border: 2px solid rgba(245, 158, 11, 0.6) !important;
  animation: amber-pulse 2s ease-in-out infinite;
}

/* Fast amber pulse for appointment pending orchestrator nodes */
@keyframes election-pulse {
  0%,
  100% {
    box-shadow:
      0 0 10px rgba(245, 158, 11, 0.5),
      0 0 25px rgba(245, 158, 11, 0.2);
    border-color: rgba(245, 158, 11, 0.7);
  }
  50% {
    box-shadow:
      0 0 20px rgba(245, 158, 11, 0.8),
      0 0 50px rgba(245, 158, 11, 0.3);
    border-color: rgba(245, 158, 11, 1);
  }
}

.election-pending-node {
  border: 2px solid rgba(245, 158, 11, 0.7) !important;
  animation: election-pulse 1s ease-in-out infinite;
}

.connected-edge {
  stroke: #22c55e !important;
  stroke-width: 2 !important;
  stroke-dasharray: 5, 5;
  animation: flow 0.5s linear infinite;
}
